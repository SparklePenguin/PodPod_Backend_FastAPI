Commit Message Prompt

다음 변경 사항에 대해
---
{diff}
---

아래 규칙을 참고해 Commit 메세지를 한국어로 작성해줘

# Git Commit Guide

## 1. 목적

이 문서는 **제품 변경 히스토리를 명확하게 추적**하고,
향후 유지보수·회고·의사결정 복기를 쉽게 하기 위한 **팀 공통 커밋 규칙**을 정의한다.

본 가이드는 다음을 목표로 한다:

* 커밋 메시지만 보고도 변경 의도 파악 가능
* 나중에 git log, git blame, cherry-pick 시 의사결정 맥락 유지
* 제품/비즈니스 변경과 기술 변경을 명확히 분리

---

## 2. 커밋 규칙 요약

* 한 커밋에는 **하나의 목적**만 담는다
* 무엇을 바꿨는지보다 **왜 바꿨는지**가 드러나야 한다
* 중간 작업(WIP) 커밋은 최종적으로 squash 또는 정리한다
* 긴 설명은 Body에, 이슈 번호·참조 문서는 Footer에 작성한다
* 커밋 로그만 읽어도 당시의 판단 근거를 이해할 수 있어야 한다

---

## 3. 커밋 메시지 기본 구조 (표준)

```text
<type>(<scope>): <subject>

<body>    # 선택 (변경 배경 / 의사결정 / 주요 변경)

<footer>  # 선택 (이슈 번호, ADR, BREAKING CHANGE)
```

### 작성 원칙

* Subject는 50자 이내, 명령형으로 작성
* Body는 80자 기준으로 줄바꿈
* Background / Decision / Change 중 **Background는 우선 작성 권장**

---

## 4. Body 작성 가이드

Body는 단순 변경 설명이 아니라 **의사결정 기록**을 남기는 공간이다.

권장 흐름:

* 왜 변경이 필요했는가 (문제 / 데이터 / 피드백)
* 어떤 선택을 했는가 (대안 대비 이유)
* 핵심 변경 사항은 무엇인가

### 예시

```text
feat(auth): 로그인 실패 시 재시도 로직 추가

기존에는 로그인 실패 시 즉시 에러를 반환하여
네트워크 오류 상황에서 사용자 이탈이 잦았다.

3회까지 재시도하도록 정책을 변경했고,
Axios 인터셉터 레벨에서 공통 처리하도록 구현했다.

Refs: #142
```

---

## 5. Footer 작성 가이드

Footer에는 **추적 가능한 정보**만 작성한다.

* 이슈 트래커 번호
* ADR / 기획 문서 ID
* 브레이킹 체인지 명시

### 예시

```text
BREAKING CHANGE: soft-delete → hard-delete 방식으로 변경
Closes: #125
Refs: ADR-004
```

---

## 6. Type 정의 (필수)

| Type       | 설명                   |
| ---------- | -------------------- |
| feat       | 새로운 기능 추가            |
| fix        | 버그 수정                |
| change     | 기존 기능/플로우/정책 변경      |
| policy     | 비즈니스 정책 변경           |
| experiment | 실험 / A/B 테스트         |
| refactor   | 리팩토링 (기능 변경 없음)      |
| perf       | 성능 개선                |
| test       | 테스트 코드 추가/수정         |
| docs       | 문서 변경                |
| build      | 빌드 시스템 변경            |
| ci         | CI 구성 변경             |
| chore      | 기타 작업 (설정, 패키지 등)    |
| revert     | 이전 커밋 되돌리기           |
| convention | import 정리, 코드 스타일 정리 |

---

## 7. Scope 작성 규칙 (선택)

Scope는 **변경 영향 도메인**을 빠르게 파악하기 위한 용도다.

### 예시

* 기능/도메인: auth, user, payment, pricing, panel
* 레이어: api, service, controller, db
* 환경/플랫폼: web, android, ios, infra

> scope는 디렉토리명이 아닌 **비즈니스/도메인 기준**을 우선한다.

---

## 8. 커밋 메시지 예시

### 기능 추가

```text
feat(payment): 무통장입금 기능 구현
```

### 버그 수정

```text
fix(account): 프로필 이미지가 표시되지 않는 문제 수정
```

### 정책/플로우 변경

```text
change(pricing): 최저가 우선 노출 정책 적용

등록순 기준 노출로 인해 고가 상품 노출 비중이 높아
구매 전환율이 하락하는 문제가 있었다.

최저가 우선 정렬로 정책을 변경했다.

Refs: #214
```

### 리팩토링

```text
refactor(service): 중복된 유저 검증 로직 분리
```

### 문서 변경

```text
docs(readme): 프로젝트 실행 방법 추가
```

### 성능 개선

```text
perf(api): 캐싱 추가로 DB 조회 속도 개선
```

### 테스트 코드

```text
test(member): 로그인 성공/실패 케이스 테스트 추가
```

---

## 9. 간결 커밋 허용 기준

아래 조건을 모두 만족할 경우 Body 없이 허용한다:

* 영향 범위가 명확하고 제한적
* 롤백이 쉬움
* 비즈니스/정책 의미 없음

```text
fix(auth): 토큰 만료 시 401 반환
```

---

## 10. PR과 커밋의 역할 분리

* **PR 설명**: 변경 전체 맥락, 리뷰 포인트, 스크린샷
* **Commit 메시지**: 개별 의사결정의 기록

> PR이 squash 되더라도 커밋 메시지는 단독으로 의미를 가져야 한다.

---

## 11. 권장 워크플로우

1. 작업 시작 전 변경 목적을 한 문장으로 정의
2. 커밋 시 "이 변경을 왜 했는가?"를 기준으로 메시지 작성
3. PR 전 git log만 읽고도 이해되는지 확인

---

> 이 가이드는 팀 합의에 따라 지속적으로 개선한다.
