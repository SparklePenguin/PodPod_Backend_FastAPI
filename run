#!/bin/bash

# PodPod FastAPI 서버 시작 스크립트

# 현재 디렉토리 확인
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
cd "$SCRIPT_DIR"

# 가상환경 경로
VENV_PATH="./podpod"

# 가상환경이 존재하는지 확인
if [ ! -d "$VENV_PATH" ]; then
    echo "가상환경 'podpod'를 찾을 수 없습니다."
    echo "다음 명령어로 가상환경을 생성하세요:"
    echo "python3 -m venv podpod"
    exit 1
fi

# 가상환경의 Python 경로
PYTHON_PATH="$VENV_PATH/bin/python3"

# 가상환경의 Python이 존재하는지 확인
if [ ! -f "$PYTHON_PATH" ]; then
    echo "가상환경 Python 실행 파일을 찾을 수 없습니다: $PYTHON_PATH"
    exit 1
fi

echo "가상환경 Python 사용: $PYTHON_PATH"

# 가상환경의 Python으로 run.py 실행
exec "$PYTHON_PATH" run.py "$@"
